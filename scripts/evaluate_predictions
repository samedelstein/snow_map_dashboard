{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 11,
   "id": "be3f8c86-1dfa-40c8-9358-2002099a4971",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Evaluating: C:\\Users\\samie\\snow_map\\scripts\\data\\artifacts_snow\\predictions_backfill_prob.csv\n",
      "{\n",
      "  \"source_path\": \"C:\\\\Users\\\\samie\\\\snow_map\\\\scripts\\\\data\\\\artifacts_snow\\\\predictions_backfill_prob.csv\",\n",
      "  \"rows_total\": 24770,\n",
      "  \"rows_resolved\": 20450,\n",
      "  \"threshold\": 0.6,\n",
      "  \"by_horizon\": {\n",
      "    \"1\": {\n",
      "      \"rows\": 20450,\n",
      "      \"pos_rate\": 0.42400977995110023,\n",
      "      \"auc\": 0.509081520156677,\n",
      "      \"pr_auc\": 0.4351040429214833,\n",
      "      \"brier\": 0.28704501222081974,\n",
      "      \"ece\": 0.1678104945056978,\n",
      "      \"precision_at_threshold\": 0.41490963855421686,\n",
      "      \"recall_at_threshold\": 0.12709030100334448\n",
      "    },\n",
      "    \"2\": {\n",
      "      \"rows\": 20450,\n",
      "      \"pos_rate\": 0.5650366748166259,\n",
      "      \"auc\": 0.5685326014911698,\n",
      "      \"pr_auc\": 0.6279128697207551,\n",
      "      \"brier\": 0.2674513008772667,\n",
      "      \"ece\": 0.1349091152313828,\n",
      "      \"precision_at_threshold\": 0.618513969910961,\n",
      "      \"recall_at_threshold\": 0.3486802250108178\n",
      "    },\n",
      "    \"4\": {\n",
      "      \"rows\": 20450,\n",
      "      \"pos_rate\": 0.6759413202933985,\n",
      "      \"auc\": 0.6108327839365922,\n",
      "      \"pr_auc\": 0.7584716060462016,\n",
      "      \"brier\": 0.2262205461764643,\n",
      "      \"ece\": 0.10959216296638906,\n",
      "      \"precision_at_threshold\": 0.7331960461285009,\n",
      "      \"recall_at_threshold\": 0.6439267886855241\n",
      "    },\n",
      "    \"8\": {\n",
      "      \"rows\": 20450,\n",
      "      \"pos_rate\": 0.7665525672371638,\n",
      "      \"auc\": 0.6789031017505406,\n",
      "      \"pr_auc\": 0.8766766689205671,\n",
      "      \"brier\": 0.17784998319307468,\n",
      "      \"ece\": 0.10083753050089975,\n",
      "      \"precision_at_threshold\": 0.8150986909041579,\n",
      "      \"recall_at_threshold\": 0.7665858637407502\n",
      "    }\n",
      "  },\n",
      "  \"ranking\": {\n",
      "    \"1\": {\n",
      "      \"overall\": [\n",
      "        {\n",
      "          \"k\": 10,\n",
      "          \"precision\": 1.0,\n",
      "          \"recall\": 0.0011532695190866105,\n",
      "          \"total_positives\": 8671\n",
      "        },\n",
      "        {\n",
      "          \"k\": 25,\n",
      "          \"precision\": 0.96,\n",
      "          \"recall\": 0.002767846845807865,\n",
      "          \"total_positives\": 8671\n",
      "        },\n",
      "        {\n",
      "          \"k\": 50,\n",
      "          \"precision\": 0.9,\n",
      "          \"recall\": 0.005189712835889747,\n",
      "          \"total_positives\": 8671\n",
      "        },\n",
      "        {\n",
      "          \"k\": 100,\n",
      "          \"precision\": 0.7,\n",
      "          \"recall\": 0.008072886633606273,\n",
      "          \"total_positives\": 8671\n",
      "        }\n",
      "      ],\n",
      "      \"priority_1\": [\n",
      "        {\n",
      "          \"k\": 10,\n",
      "          \"precision\": 0.6,\n",
      "          \"recall\": 0.0011037527593818985,\n",
      "          \"total_positives\": 5436\n",
      "        },\n",
      "        {\n",
      "          \"k\": 25,\n",
      "          \"precision\": 0.56,\n",
      "          \"recall\": 0.0025754231052244297,\n",
      "          \"total_positives\": 5436\n",
      "        },\n",
      "        {\n",
      "          \"k\": 50,\n",
      "          \"precision\": 0.46,\n",
      "          \"recall\": 0.004231052244297278,\n",
      "          \"total_positives\": 5436\n",
      "        },\n",
      "        {\n",
      "          \"k\": 100,\n",
      "          \"precision\": 0.53,\n",
      "          \"recall\": 0.00974981604120677,\n",
      "          \"total_positives\": 5436\n",
      "        }\n",
      "      ],\n",
      "      \"other\": [\n",
      "        {\n",
      "          \"k\": 10,\n",
      "          \"precision\": 1.0,\n",
      "          \"recall\": 0.0030911901081916537,\n",
      "          \"total_positives\": 3235\n",
      "        },\n",
      "        {\n",
      "          \"k\": 25,\n",
      "          \"precision\": 1.0,\n",
      "          \"recall\": 0.0077279752704791345,\n",
      "          \"total_positives\": 3235\n",
      "        },\n",
      "        {\n",
      "          \"k\": 50,\n",
      "          \"precision\": 0.92,\n",
      "          \"recall\": 0.014219474497681607,\n",
      "          \"total_positives\": 3235\n",
      "        },\n",
      "        {\n",
      "          \"k\": 100,\n",
      "          \"precision\": 0.63,\n",
      "          \"recall\": 0.01947449768160742,\n",
      "          \"total_positives\": 3235\n",
      "        }\n",
      "      ]\n",
      "    },\n",
      "    \"2\": {\n",
      "      \"overall\": [\n",
      "        {\n",
      "          \"k\": 10,\n",
      "          \"precision\": 0.8,\n",
      "          \"recall\": 0.0006923409779316313,\n",
      "          \"total_positives\": 11555\n",
      "        },\n",
      "        {\n",
      "          \"k\": 25,\n",
      "          \"precision\": 0.76,\n",
      "          \"recall\": 0.0016443098225876244,\n",
      "          \"total_positives\": 11555\n",
      "        },\n",
      "        {\n",
      "          \"k\": 50,\n",
      "          \"precision\": 0.88,\n",
      "          \"recall\": 0.0038078753786239725,\n",
      "          \"total_positives\": 11555\n",
      "        },\n",
      "        {\n",
      "          \"k\": 100,\n",
      "          \"precision\": 0.93,\n",
      "          \"recall\": 0.008048463868455214,\n",
      "          \"total_positives\": 11555\n",
      "        }\n",
      "      ],\n",
      "      \"priority_1\": [\n",
      "        {\n",
      "          \"k\": 10,\n",
      "          \"precision\": 0.9,\n",
      "          \"recall\": 0.0011896893588896232,\n",
      "          \"total_positives\": 7565\n",
      "        },\n",
      "        {\n",
      "          \"k\": 25,\n",
      "          \"precision\": 0.76,\n",
      "          \"recall\": 0.002511566424322538,\n",
      "          \"total_positives\": 7565\n",
      "        },\n",
      "        {\n",
      "          \"k\": 50,\n",
      "          \"precision\": 0.8,\n",
      "          \"recall\": 0.005287508261731659,\n",
      "          \"total_positives\": 7565\n",
      "        },\n",
      "        {\n",
      "          \"k\": 100,\n",
      "          \"precision\": 0.84,\n",
      "          \"recall\": 0.011103767349636483,\n",
      "          \"total_positives\": 7565\n",
      "        }\n",
      "      ],\n",
      "      \"other\": [\n",
      "        {\n",
      "          \"k\": 10,\n",
      "          \"precision\": 1.0,\n",
      "          \"recall\": 0.002506265664160401,\n",
      "          \"total_positives\": 3990\n",
      "        },\n",
      "        {\n",
      "          \"k\": 25,\n",
      "          \"precision\": 0.96,\n",
      "          \"recall\": 0.006015037593984963,\n",
      "          \"total_positives\": 3990\n",
      "        },\n",
      "        {\n",
      "          \"k\": 50,\n",
      "          \"precision\": 0.98,\n",
      "          \"recall\": 0.012280701754385965,\n",
      "          \"total_positives\": 3990\n",
      "        },\n",
      "        {\n",
      "          \"k\": 100,\n",
      "          \"precision\": 0.95,\n",
      "          \"recall\": 0.023809523809523808,\n",
      "          \"total_positives\": 3990\n",
      "        }\n",
      "      ]\n",
      "    },\n",
      "    \"4\": {\n",
      "      \"overall\": [\n",
      "        {\n",
      "          \"k\": 10,\n",
      "          \"precision\": 0.8,\n",
      "          \"recall\": 0.0005787455689792375,\n",
      "          \"total_positives\": 13823\n",
      "        },\n",
      "        {\n",
      "          \"k\": 25,\n",
      "          \"precision\": 0.88,\n",
      "          \"recall\": 0.0015915503146929032,\n",
      "          \"total_positives\": 13823\n",
      "        },\n",
      "        {\n",
      "          \"k\": 50,\n",
      "          \"precision\": 0.94,\n",
      "          \"recall\": 0.0034001302177530204,\n",
      "          \"total_positives\": 13823\n",
      "        },\n",
      "        {\n",
      "          \"k\": 100,\n",
      "          \"precision\": 0.95,\n",
      "          \"recall\": 0.006872603631628445,\n",
      "          \"total_positives\": 13823\n",
      "        }\n",
      "      ],\n",
      "      \"priority_1\": [\n",
      "        {\n",
      "          \"k\": 10,\n",
      "          \"precision\": 0.9,\n",
      "          \"recall\": 0.0009693053311793214,\n",
      "          \"total_positives\": 9285\n",
      "        },\n",
      "        {\n",
      "          \"k\": 25,\n",
      "          \"precision\": 0.96,\n",
      "          \"recall\": 0.002584814216478191,\n",
      "          \"total_positives\": 9285\n",
      "        },\n",
      "        {\n",
      "          \"k\": 50,\n",
      "          \"precision\": 0.94,\n",
      "          \"recall\": 0.0050619278406031235,\n",
      "          \"total_positives\": 9285\n",
      "        },\n",
      "        {\n",
      "          \"k\": 100,\n",
      "          \"precision\": 0.9,\n",
      "          \"recall\": 0.009693053311793215,\n",
      "          \"total_positives\": 9285\n",
      "        }\n",
      "      ],\n",
      "      \"other\": [\n",
      "        {\n",
      "          \"k\": 10,\n",
      "          \"precision\": 1.0,\n",
      "          \"recall\": 0.0022036139268400176,\n",
      "          \"total_positives\": 4538\n",
      "        },\n",
      "        {\n",
      "          \"k\": 25,\n",
      "          \"precision\": 1.0,\n",
      "          \"recall\": 0.005509034817100044,\n",
      "          \"total_positives\": 4538\n",
      "        },\n",
      "        {\n",
      "          \"k\": 50,\n",
      "          \"precision\": 1.0,\n",
      "          \"recall\": 0.011018069634200088,\n",
      "          \"total_positives\": 4538\n",
      "        },\n",
      "        {\n",
      "          \"k\": 100,\n",
      "          \"precision\": 1.0,\n",
      "          \"recall\": 0.022036139268400177,\n",
      "          \"total_positives\": 4538\n",
      "        }\n",
      "      ]\n",
      "    },\n",
      "    \"8\": {\n",
      "      \"overall\": [\n",
      "        {\n",
      "          \"k\": 10,\n",
      "          \"precision\": 1.0,\n",
      "          \"recall\": 0.0006379178361826997,\n",
      "          \"total_positives\": 15676\n",
      "        },\n",
      "        {\n",
      "          \"k\": 25,\n",
      "          \"precision\": 1.0,\n",
      "          \"recall\": 0.001594794590456749,\n",
      "          \"total_positives\": 15676\n",
      "        },\n",
      "        {\n",
      "          \"k\": 50,\n",
      "          \"precision\": 0.98,\n",
      "          \"recall\": 0.0031257973972952284,\n",
      "          \"total_positives\": 15676\n",
      "        },\n",
      "        {\n",
      "          \"k\": 100,\n",
      "          \"precision\": 0.98,\n",
      "          \"recall\": 0.006251594794590457,\n",
      "          \"total_positives\": 15676\n",
      "        }\n",
      "      ],\n",
      "      \"priority_1\": [\n",
      "        {\n",
      "          \"k\": 10,\n",
      "          \"precision\": 1.0,\n",
      "          \"recall\": 0.0009379983116030392,\n",
      "          \"total_positives\": 10661\n",
      "        },\n",
      "        {\n",
      "          \"k\": 25,\n",
      "          \"precision\": 1.0,\n",
      "          \"recall\": 0.002344995779007598,\n",
      "          \"total_positives\": 10661\n",
      "        },\n",
      "        {\n",
      "          \"k\": 50,\n",
      "          \"precision\": 1.0,\n",
      "          \"recall\": 0.004689991558015196,\n",
      "          \"total_positives\": 10661\n",
      "        },\n",
      "        {\n",
      "          \"k\": 100,\n",
      "          \"precision\": 1.0,\n",
      "          \"recall\": 0.009379983116030392,\n",
      "          \"total_positives\": 10661\n",
      "        }\n",
      "      ],\n",
      "      \"other\": [\n",
      "        {\n",
      "          \"k\": 10,\n",
      "          \"precision\": 1.0,\n",
      "          \"recall\": 0.0019940179461615153,\n",
      "          \"total_positives\": 5015\n",
      "        },\n",
      "        {\n",
      "          \"k\": 25,\n",
      "          \"precision\": 0.92,\n",
      "          \"recall\": 0.0045862412761714854,\n",
      "          \"total_positives\": 5015\n",
      "        },\n",
      "        {\n",
      "          \"k\": 50,\n",
      "          \"precision\": 0.96,\n",
      "          \"recall\": 0.009571286141575274,\n",
      "          \"total_positives\": 5015\n",
      "        },\n",
      "        {\n",
      "          \"k\": 100,\n",
      "          \"precision\": 0.98,\n",
      "          \"recall\": 0.019541375872382853,\n",
      "          \"total_positives\": 5015\n",
      "        }\n",
      "      ]\n",
      "    }\n",
      "  }\n",
      "}\n"
     ]
    }
   ],
   "source": [
    "\"\"\"\n",
    "Evaluate historical predictions (backfill or future prediction history).\n",
    "\n",
    "Inputs (first one found / readable):\n",
    "  - data/artifacts_snow/predictions_history_prob.csv (preferred)\n",
    "  - data/artifacts_snow/predictions_backfill_prob.csv\n",
    "  - OR raw GitHub URLs for those files (if local not present)\n",
    "\n",
    "Outputs:\n",
    "  - data/artifacts_snow/eval_report.json\n",
    "  - data/artifacts_snow/eval_calibration_1h.csv\n",
    "\"\"\"\n",
    "\n",
    "from __future__ import annotations\n",
    "\n",
    "import json\n",
    "from pathlib import Path\n",
    "import numpy as np\n",
    "import pandas as pd\n",
    "\n",
    "from sklearn.metrics import roc_auc_score, average_precision_score, brier_score_loss\n",
    "\n",
    "HORIZONS = [1, 2, 4, 8]\n",
    "THRESH = 0.60\n",
    "RANKING_KS = [10, 25, 50, 100]\n",
    "\n",
    "# --- Optional: set these if you want to read from GitHub when local doesn't exist\n",
    "GITHUB_RAW_BASE = \"https://raw.githubusercontent.com/samedelstein/snow_map_dashboard/main\"\n",
    "HISTORY_URL = f\"{GITHUB_RAW_BASE}/data/artifacts_snow/predictions_history_prob.csv\"\n",
    "BACKFILL_URL = \"C:/Users/samie/snow_map/scripts/data/artifacts_snow/predictions_backfill_prob.csv\"\n",
    "\n",
    "\n",
    "def get_base_dir() -> Path:\n",
    "    \"\"\"\n",
    "    Script/Actions: repo-root-ish based on __file__\n",
    "    Notebook: current working directory\n",
    "    \"\"\"\n",
    "    if \"__file__\" in globals():\n",
    "        return Path(__file__).resolve().parents[1]\n",
    "    return Path.cwd().resolve()\n",
    "\n",
    "\n",
    "BASE_DIR = get_base_dir()\n",
    "DATA_DIR = BASE_DIR / \"data\"\n",
    "ARTIFACT_DIR = DATA_DIR / \"artifacts_snow\"\n",
    "ARTIFACT_DIR.mkdir(parents=True, exist_ok=True)\n",
    "\n",
    "\n",
    "def expected_calibration_error(y_true: np.ndarray, y_prob: np.ndarray, n_bins: int = 10) -> float:\n",
    "    bins = np.linspace(0.0, 1.0, n_bins + 1)\n",
    "    bin_ids = np.digitize(y_prob, bins) - 1\n",
    "    ece = 0.0\n",
    "    for i in range(n_bins):\n",
    "        m = bin_ids == i\n",
    "        if not np.any(m):\n",
    "            continue\n",
    "        ece += abs(y_true[m].mean() - y_prob[m].mean()) * (m.sum() / len(y_true))\n",
    "    return float(ece)\n",
    "\n",
    "\n",
    "def ranking_metrics_at_k(y_true: np.ndarray, y_prob: np.ndarray, ks: list[int]):\n",
    "    mask = np.isfinite(y_prob)\n",
    "    y_true = y_true[mask]\n",
    "    y_prob = y_prob[mask]\n",
    "    if y_true.size == 0:\n",
    "        return [{\"k\": int(k), \"precision\": None, \"recall\": None, \"total_positives\": 0} for k in ks]\n",
    "\n",
    "    order = np.argsort(-y_prob)\n",
    "    total_pos = int(y_true.sum())\n",
    "    out = []\n",
    "    for k in ks:\n",
    "        k_use = int(min(k, y_true.size))\n",
    "        top = order[:k_use]\n",
    "        hits = int(y_true[top].sum())\n",
    "        out.append({\n",
    "            \"k\": int(k),\n",
    "            \"precision\": float(hits / k_use) if k_use else None,\n",
    "            \"recall\": float(hits / total_pos) if total_pos else None,\n",
    "            \"total_positives\": total_pos,\n",
    "        })\n",
    "    return out\n",
    "\n",
    "\n",
    "def _read_csv_any(path_or_url: str | Path) -> pd.DataFrame:\n",
    "    \"\"\"\n",
    "    pd.read_csv supports local paths and http(s) URLs.\n",
    "    \"\"\"\n",
    "    return pd.read_csv(path_or_url)\n",
    "\n",
    "\n",
    "def evaluate_file(path_or_url: str | Path, output_dir: Path) -> dict:\n",
    "    df = _read_csv_any(path_or_url)\n",
    "\n",
    "    # standardize censoring\n",
    "    if \"censored\" in df.columns:\n",
    "        cens = df[\"censored\"].astype(bool)\n",
    "    else:\n",
    "        cens = df.get(\"hours_to_next_service\").isna()\n",
    "\n",
    "    resolved = ~cens\n",
    "\n",
    "    # ignore untracked if present\n",
    "    if \"prediction_status\" in df.columns:\n",
    "        resolved = resolved & (df[\"prediction_status\"] == \"OK\")\n",
    "\n",
    "    report = {\n",
    "        \"source_path\": str(path_or_url),\n",
    "        \"rows_total\": int(len(df)),\n",
    "        \"rows_resolved\": int(resolved.sum()),\n",
    "        \"threshold\": THRESH,\n",
    "        \"by_horizon\": {},\n",
    "        \"ranking\": {},\n",
    "    }\n",
    "\n",
    "    cal_1h = None\n",
    "\n",
    "    for h in HORIZONS:\n",
    "        y_col = f\"y_{h}h\"\n",
    "        p_col = f\"p_{h}h\"\n",
    "        if y_col not in df.columns or p_col not in df.columns:\n",
    "            report[\"by_horizon\"][str(h)] = {\"note\": \"missing columns\"}\n",
    "            continue\n",
    "\n",
    "        y = df.loc[resolved, y_col].to_numpy(dtype=int)\n",
    "        p = df.loc[resolved, p_col].to_numpy(dtype=float)\n",
    "\n",
    "        if len(np.unique(y)) < 2:\n",
    "            auc = pr_auc = brier = None\n",
    "        else:\n",
    "            auc = float(roc_auc_score(y, p))\n",
    "            pr_auc = float(average_precision_score(y, p))\n",
    "            brier = float(brier_score_loss(y, p))\n",
    "\n",
    "        flag = (p >= THRESH).astype(int)\n",
    "        tp = int(((flag == 1) & (y == 1)).sum())\n",
    "        fp = int(((flag == 1) & (y == 0)).sum())\n",
    "        fn = int(((flag == 0) & (y == 1)).sum())\n",
    "        precision = tp / (tp + fp) if (tp + fp) else None\n",
    "        recall = tp / (tp + fn) if (tp + fn) else None\n",
    "\n",
    "        ece = expected_calibration_error(y, p) if len(y) else None\n",
    "\n",
    "        report[\"by_horizon\"][str(h)] = {\n",
    "            \"rows\": int(len(y)),\n",
    "            \"pos_rate\": float(y.mean()) if len(y) else None,\n",
    "            \"auc\": auc,\n",
    "            \"pr_auc\": pr_auc,\n",
    "            \"brier\": brier,\n",
    "            \"ece\": ece,\n",
    "            \"precision_at_threshold\": precision,\n",
    "            \"recall_at_threshold\": recall,\n",
    "        }\n",
    "\n",
    "        # Ranking metrics (overall + priority_1 if present)\n",
    "        rank = {\"overall\": ranking_metrics_at_k(y, p, RANKING_KS)}\n",
    "        if \"priority_num\" in df.columns:\n",
    "            pr1 = df.loc[resolved, \"priority_num\"].fillna(-1).to_numpy() == 1\n",
    "            rank[\"priority_1\"] = ranking_metrics_at_k(y[pr1], p[pr1], RANKING_KS)\n",
    "            rank[\"other\"] = ranking_metrics_at_k(y[~pr1], p[~pr1], RANKING_KS)\n",
    "\n",
    "        report[\"ranking\"][str(h)] = rank\n",
    "\n",
    "        if h == 1:\n",
    "            bins = pd.cut(p, bins=np.linspace(0, 1, 11), include_lowest=True)\n",
    "            cal_1h = (\n",
    "                pd.DataFrame({\"bin\": bins, \"p\": p, \"y\": y})\n",
    "                .groupby(\"bin\", observed=False)\n",
    "                .agg(n=(\"y\", \"size\"), avg_p=(\"p\", \"mean\"), frac_y=(\"y\", \"mean\"))\n",
    "                .reset_index()\n",
    "            )\n",
    "\n",
    "    # write artifacts\n",
    "    out_json = output_dir / \"eval_report.json\"\n",
    "    out_json.write_text(json.dumps(report, indent=2), encoding=\"utf-8\")\n",
    "\n",
    "    if cal_1h is not None:\n",
    "        cal_path = output_dir / \"eval_calibration_1h.csv\"\n",
    "        cal_1h.to_csv(cal_path, index=False)\n",
    "\n",
    "    return report\n",
    "\n",
    "\n",
    "def pick_input_source() -> str | Path:\n",
    "    \"\"\"\n",
    "    Preference:\n",
    "      1) local predictions_history_prob.csv\n",
    "      2) local predictions_backfill_prob.csv\n",
    "      3) GitHub raw history URL\n",
    "      4) GitHub raw backfill URL\n",
    "    \"\"\"\n",
    "    history_local = ARTIFACT_DIR / \"predictions_history_prob.csv\"\n",
    "    backfill_local = ARTIFACT_DIR / \"predictions_backfill_prob.csv\"\n",
    "\n",
    "    if history_local.exists():\n",
    "        return history_local\n",
    "    if backfill_local.exists():\n",
    "        return backfill_local\n",
    "\n",
    "    # fall back to GitHub\n",
    "    # (read_csv will raise if missing/forbidden; we try history first)\n",
    "    try:\n",
    "        _ = pd.read_csv(HISTORY_URL, nrows=5)\n",
    "        return HISTORY_URL\n",
    "    except Exception:\n",
    "        return BACKFILL_URL\n",
    "\n",
    "\n",
    "def main() -> None:\n",
    "    src = pick_input_source()\n",
    "    print(f\"Evaluating: {src}\")\n",
    "    report = evaluate_file(src, ARTIFACT_DIR)\n",
    "    print(json.dumps(report, indent=2))\n",
    "\n",
    "\n",
    "# Notebook: call main() directly\n",
    "# Script/GitHub Actions: __main__ guard works as normal\n",
    "#if __name__ == \"__main__\":\n",
    "#    main()\n",
    "main()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "36aec92c-0f6e-4095-b867-290fca955a74",
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3 (ipykernel)",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.11.7"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
